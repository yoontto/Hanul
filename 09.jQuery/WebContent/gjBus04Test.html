<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gwangju Bus Test04</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- 위의 cdn 방식은 네트워크에 문제가 생길 경우 동작이 안되므로
	아래의 내장 js의 src를 사용해서 대비해준다. -->
<script src="jQuery/jquery-3.6.0.js"></script>
<script>
$(document).ready(function(){
	$("#btn").click(function(){
		$.ajax({
			dataType : "xml",
			url : "gjBusXml.jsp", //광주광역시 버스정보 서버에 요청하겠다
			success : function(data) {resultHtml(data);},
			error : function(){ alert("로딩실패!");}
		});
	});
});//ready()

function resultHtml(data){
	alert("로딩성공!");
	
	var LINE = $(data).find("LINE");
	var html = "<table border='1'>";
		html += "<tr>";
		html += "<th>노선번호</th>";
		html += "<th>출발지</th>";
		html += "<th>도착지</th>";
		html += "<th>첫차</th>";
		html += "<th>막차</th>";
		html += "<th>운행간격</th>";
		html += "<th>노선종류</th>";
		html += "</tr>";
	
		
	for (var i = 0; i < LINE.length; i++){
		html += "<tr align='center'>";
		html += "<td>" + LINE.eq(i).find("LINE_NAME").text() + "</td>";
		html += "<td>" + LINE.eq(i).find("DIR_UP_NAME").text() + "</td>";
		html += "<td>" + LINE.eq(i).find("DIR_DOWN_NAME").text() + "</td>";
		html += "<td>" + LINE.eq(i).find("FIRST_RUN_TIME").text() + "</td>";
		html += "<td>" + LINE.eq(i).find("LAST_RUN_TIME").text() + "</td>";
		html += "<td>" + LINE.eq(i).find("RUN_INTERVAL").text() + "</td>";
		
		if(LINE.eq(i).find("LINE_KIND").text() == "1"){
			html += "<td>급행간선</td>";
		} else if (LINE.eq(i).find("LINE_KIND").text() == "2"){
			html += "<td>간선</td>";
		} else if (LINE.eq(i).find("LINE_KIND").text() == "3"){
			html += "<td>지선</td>";
		} else if (LINE.eq(i).find("LINE_KIND").text() == "4"){
			html += "<td>마을버스</td>";
		} else if (LINE.eq(i).find("LINE_KIND").text() == "5"){
			html += "<td>공항버스</td>";
		} else if (LINE.eq(i).find("LINE_KIND").text() == "6"){
			html += "<td>광역버스</td>";
		}
	
		html += "</tr>";
	}
	
	html += "</table>";
	$("#display").html(html);
}
</script>
</head>
<body>
<button id="btn">
광주광역시 버스 노선정보
</button>
<div id="display">여기에 버스 노선 정보가 출력됩니다.</div>
</body>
</html>